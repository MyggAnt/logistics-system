# Модуль управления заказами - Frontend

## Обзор

Модуль управления заказами представляет собой комплексное решение для автоматизации процессов приема, обработки и отслеживания заказов в логистической системе. Модуль поддерживает все типы заказов согласно требованиям: внутренние, розничные, e-commerce и закупочные.

## Архитектура

Модуль состоит из трех основных компонентов:

1. **OrdersManagement** - основной компонент управления заказами
2. **LogisticsBatchManagement** - управление логистическими партиями
3. **OrderTracking** - отслеживание заказов в реальном времени

## Функциональные возможности

### 1. Управление заказами (OrdersManagement)

#### Типы заказов
- **Внутренние** - заказы между подразделениями компании
- **Розничные** - заказы от гипермаркетов и торговых точек
- **E-commerce** - заказы от интернет-магазина
- **Закупочные** - заказы поставщикам

#### Каналы поступления
- Распределительные центры (РЦ)
- Гипермаркеты
- Интернет-магазин
- Внешние поставщики

#### Статусы заказов
- Черновик
- Подтвержден
- Обрабатывается
- Комплектуется
- Упакован
- Отправлен
- В пути
- Доставлен
- Отменен
- Возврат

#### Функции
- Создание новых заказов
- Редактирование существующих заказов
- Удаление заказов
- Фильтрация по типу, статусу, приоритету
- Поиск по номеру, клиенту, адресу
- Детальный просмотр заказа
- Управление приоритетами
- Расчет стоимости доставки

### 2. Логистические партии (LogisticsBatchManagement)

#### Функции
- Создание логистических партий
- Группировка заказов по направлениям
- Оптимизация маршрутов доставки
- Расчет общих параметров партии (вес, объем, стоимость)
- Управление статусами партий
- Планирование доставки

#### Статусы партий
- Планирование
- Формирование
- Готово
- В пути
- Доставлено
- Отменено

### 3. Отслеживание заказов (OrderTracking)

#### Функции
- Поиск заказов по номеру или трек-номеру
- Отображение прогресса доставки
- История событий и изменений статуса
- Информация о водителе и транспорте
- Контактная информация
- Визуализация этапов доставки

#### Этапы доставки
1. Подтвержден
2. Обработка
3. Комплектация
4. Упаковка
5. Отправка
6. В пути
7. Доставлен

## Техническая реализация

### Технологии
- React 18+
- TypeScript
- Ant Design (UI компоненты)
- Next.js (маршрутизация)

### Структура файлов
```
frontend/
├── components/
│   ├── OrdersManagement.tsx      # Основной компонент управления заказами
│   ├── LogisticsBatchManagement.tsx  # Управление логистическими партиями
│   └── OrderTracking.tsx         # Отслеживание заказов
├── pages/
│   ├── orders.tsx                # Страница управления заказами
│   ├── logistics-batches.tsx     # Страница логистических партий
│   └── order-tracking.tsx        # Страница отслеживания
└── README_ORDERS.md              # Документация модуля
```

### Интерфейсы данных

#### OrderData
```typescript
interface OrderData {
  key: string;
  id: string;
  orderNumber: string;
  orderType: 'internal' | 'retail' | 'ecommerce' | 'procurement';
  channel: 'distribution_center' | 'hypermarket' | 'online_store' | 'external_supplier';
  customerName: string;
  customerType: 'business' | 'individual';
  destination: string;
  sourceLocation: string;
  status: 'draft' | 'confirmed' | 'processing' | 'picking' | 'packed' | 'shipped' | 'in_transit' | 'delivered' | 'cancelled' | 'returned';
  priority: 'low' | 'medium' | 'high' | 'urgent';
  createdAt: string;
  estimatedDelivery: string;
  actualDelivery?: string;
  totalAmount: number;
  deliveryCost: number;
  totalCost: number;
  currency: string;
  paymentStatus: 'pending' | 'paid' | 'partial' | 'overdue';
  logisticsBatchId?: string;
  vehicleId?: string;
  driverId?: string;
  trackingNumber?: string;
  notes?: string;
  items: OrderItem[];
  documents: string[];
  tags: string[];
  lastUpdated: string;
  createdBy: string;
  assignedTo?: string;
}
```

#### LogisticsBatch
```typescript
interface LogisticsBatch {
  key: string;
  id: string;
  batchNumber: string;
  name: string;
  description: string;
  status: 'planning' | 'forming' | 'ready' | 'in_transit' | 'delivered' | 'cancelled';
  priority: 'low' | 'medium' | 'high' | 'urgent';
  createdAt: string;
  plannedDeliveryDate: string;
  actualDeliveryDate?: string;
  totalOrders: number;
  totalWeight: number;
  totalVolume: number;
  totalCost: number;
  currency: string;
  vehicleId?: string;
  driverId?: string;
  routeId?: string;
  sourceLocation: string;
  destination: string;
  notes?: string;
  orders: string[];
  lastUpdated: string;
  createdBy: string;
}
```

## Использование

### 1. Управление заказами
Перейдите на страницу `/orders` для доступа к модулю управления заказами.

**Основные действия:**
- Создание нового заказа (кнопка "Создать заказ")
- Просмотр списка всех заказов
- Фильтрация по типу заказа
- Поиск по номеру, клиенту или адресу
- Редактирование заказов
- Удаление заказов

### 2. Логистические партии
Перейдите на страницу `/logistics-batches` для управления логистическими партиями.

**Основные действия:**
- Создание новой партии
- Группировка заказов
- Планирование маршрутов
- Отслеживание статуса партий

### 3. Отслеживание заказов
Перейдите на страницу `/order-tracking` для отслеживания конкретного заказа.

**Основные действия:**
- Ввод номера заказа или трек-номера
- Просмотр прогресса доставки
- История событий
- Контактная информация

## Интеграция

### Backend API
Модуль готов к интеграции с backend API. Основные эндпоинты:

- `GET /api/orders` - получение списка заказов
- `POST /api/orders` - создание заказа
- `PUT /api/orders/:id` - обновление заказа
- `DELETE /api/orders/:id` - удаление заказа
- `GET /api/orders/:id/tracking` - отслеживание заказа
- `GET /api/logistics-batches` - получение логистических партий
- `POST /api/logistics-batches` - создание партии

### База данных
Модуль использует следующие основные таблицы:
- `orders` - заказы
- `order_items` - позиции заказов
- `logistics_batches` - логистические партии
- `tracking_events` - события отслеживания

## Расширение функциональности

### Добавление новых типов заказов
1. Обновите интерфейс `OrderData`
2. Добавьте новый тип в `orderTypeLabels`
3. Обновите фильтры и формы

### Добавление новых статусов
1. Обновите интерфейс `OrderData`
2. Добавьте новый статус в `statusColors` и `getStatusLabel`
3. Обновите фильтры и формы

### Интеграция с внешними системами
Модуль поддерживает интеграцию с:
- ERP системами
- CRM системами
- E-commerce платформами
- Системами управления складом (WMS)
- Системами управления транспортом (TMS)

## Безопасность

### Права доступа
- Просмотр заказов: все авторизованные пользователи
- Создание/редактирование: менеджеры по заказам
- Удаление: администраторы
- Управление партиями: логисты
- Отслеживание: все пользователи

### Валидация данных
- Проверка обязательных полей
- Валидация форматов данных
- Проверка прав доступа
- Логирование действий пользователей

## Производительность

### Оптимизация
- Пагинация больших списков
- Ленивая загрузка данных
- Кэширование часто используемых данных
- Оптимизация запросов к API

### Масштабируемость
- Поддержка большого количества заказов
- Эффективная фильтрация и поиск
- Оптимизация для мобильных устройств

## Тестирование

### Unit тесты
- Тестирование компонентов
- Тестирование бизнес-логики
- Тестирование валидации

### Integration тесты
- Тестирование API интеграции
- Тестирование пользовательских сценариев
- Тестирование производительности

## Развертывание

### Требования
- Node.js 18+
- npm или yarn
- Современный браузер

### Установка
```bash
npm install
npm run build
npm start
```

### Переменные окружения
```env
NEXT_PUBLIC_API_URL=http://localhost:3001/api
NEXT_PUBLIC_APP_NAME=Logistics System
```

## Поддержка

### Документация
- API документация
- Руководство пользователя
- Руководство разработчика

### Контакты
- Техническая поддержка: support@logistics.com
- Разработка: dev@logistics.com

## Лицензия

MIT License - см. файл LICENSE для деталей.
